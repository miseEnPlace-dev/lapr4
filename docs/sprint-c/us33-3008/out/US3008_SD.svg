<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentStyleType="text/css" height="1743px" preserveAspectRatio="none" style="width:1906px;height:1743px;background:#FFFFFF;" version="1.1" viewBox="0 0 1906 1743" width="1906px" zoomAndPan="magnify"><defs/><g><rect fill="#FFFFFF" height="1502.9286" style="stroke:#181818;stroke-width:1.0;" width="10" x="301.5" y="122.8419"/><rect fill="#FFFFFF" height="1439.5165" style="stroke:#181818;stroke-width:1.0;" width="10" x="611.5" y="154.5479"/><rect fill="#FFFFFF" height="347.3541" style="stroke:#181818;stroke-width:1.0;" width="10" x="893.5" y="186.2539"/><rect fill="#FFFFFF" height="222.2361" style="stroke:#181818;stroke-width:1.0;" width="10" x="1034.5" y="692.1381"/><rect fill="#FFFFFF" height="30" style="stroke:#181818;stroke-width:1.0;" width="10" x="1201" y="217.9599"/><rect fill="#FFFFFF" height="61.706" style="stroke:#181818;stroke-width:1.0;" width="10" x="1340.5" y="433.196"/><rect fill="#FFFFFF" height="30" style="stroke:#181818;stroke-width:1.0;" width="10" x="1340.5" y="1226.4344"/><rect fill="#FFFFFF" height="30" style="stroke:#181818;stroke-width:1.0;" width="10" x="1340.5" y="1366.8283"/><rect fill="#FFFFFF" height="61.706" style="stroke:#181818;stroke-width:1.0;" width="10" x="1426.5" y="813.9622"/><rect fill="#FFFFFF" height="30" style="stroke:#181818;stroke-width:1.0;" width="10" x="1426.5" y="1288.1404"/><rect fill="#FFFFFF" height="31.706" style="stroke:#181818;stroke-width:1.0;" width="10" x="1426.5" y="1530.6524"/><rect fill="#FFFFFF" height="30" style="stroke:#181818;stroke-width:1.0;" width="10" x="1516" y="464.902"/><rect fill="#FFFFFF" height="30" style="stroke:#181818;stroke-width:1.0;" width="10" x="1608" y="845.6682"/><rect fill="#FFFFFF" height="31.706" style="stroke:#181818;stroke-width:1.0;" width="10" x="1717" y="343.0779"/><rect fill="#FFFFFF" height="444.1782" style="stroke:#181818;stroke-width:1.0;" width="10" x="1843" y="723.8441"/><rect fill="none" height="113.118" style="stroke:#000000;stroke-width:1.5;" width="750" x="822.5" y="389.784"/><rect fill="none" height="113.118" style="stroke:#000000;stroke-width:1.5;" width="699" x="964.5" y="770.5501"/><rect fill="none" height="221.806" style="stroke:#000000;stroke-width:1.5;" width="953" x="526.5" y="1183.0223"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="23" x2="23" y1="89.1358" y2="1643.7704"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="306.5" x2="306.5" y1="89.1358" y2="1643.7704"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="616.5" x2="616.5" y1="89.1358" y2="1643.7704"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="898.5" x2="898.5" y1="89.1358" y2="1643.7704"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="1039.5" x2="1039.5" y1="89.1358" y2="1643.7704"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="1205.5" x2="1205.5" y1="89.1358" y2="1643.7704"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="1345.5" x2="1345.5" y1="89.1358" y2="1643.7704"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="1431.5" x2="1431.5" y1="89.1358" y2="1643.7704"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="1520.5" x2="1520.5" y1="89.1358" y2="1643.7704"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="1612.5" x2="1612.5" y1="89.1358" y2="1643.7704"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="1721.5" x2="1721.5" y1="89.1358" y2="1643.7704"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="1847.5" x2="1847.5" y1="89.1358" y2="1643.7704"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="31" x="5" y="85.0339">User</text><ellipse cx="23.5" cy="18.5679" fill="#E2E2F0" rx="8" ry="8" style="stroke:#181818;stroke-width:0.5;"/><path d="M23.5,26.5679 L23.5,53.5679 M10.5,34.5679 L36.5,34.5679 M23.5,53.5679 L10.5,68.5679 M23.5,53.5679 L36.5,68.5679 " fill="none" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="31" x="5" y="1657.7364">User</text><ellipse cx="23.5" cy="1670.3383" fill="#E2E2F0" rx="8" ry="8" style="stroke:#181818;stroke-width:0.5;"/><path d="M23.5,1678.3383 L23.5,1705.3383 M10.5,1686.3383 L36.5,1686.3383 M23.5,1705.3383 L10.5,1720.3383 M23.5,1705.3383 L36.5,1720.3383 " fill="none" style="stroke:#181818;stroke-width:0.5;"/><rect fill="#E2E2F0" height="52.1358" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="108" x="252.5" y="36"/><text fill="#000000" font-family="sans-serif" font-size="14" font-style="italic" lengthAdjust="spacing" textLength="94" x="259.5" y="57.9659">«presentation»</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="94" x="259.5" y="77.0339">ShareBoardUI</text><rect fill="#E2E2F0" height="52.1358" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="108" x="252.5" y="1642.7704"/><text fill="#000000" font-family="sans-serif" font-size="14" font-style="italic" lengthAdjust="spacing" textLength="94" x="259.5" y="1664.7364">«presentation»</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="94" x="259.5" y="1683.8043">ShareBoardUI</text><rect fill="#E2E2F0" height="52.1358" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="160" x="536.5" y="36"/><text fill="#000000" font-family="sans-serif" font-size="14" font-style="italic" lengthAdjust="spacing" textLength="85" x="574" y="57.9659">«application»</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="146" x="543.5" y="77.0339">ShareBoardController</text><rect fill="#E2E2F0" height="52.1358" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="160" x="536.5" y="1642.7704"/><text fill="#000000" font-family="sans-serif" font-size="14" font-style="italic" lengthAdjust="spacing" textLength="85" x="574" y="1664.7364">«application»</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="146" x="543.5" y="1683.8043">ShareBoardController</text><rect fill="#E2E2F0" height="52.1358" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="132" x="832.5" y="36"/><text fill="#000000" font-family="sans-serif" font-size="14" font-style="italic" lengthAdjust="spacing" textLength="57" x="870" y="57.9659">«service»</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="118" x="839.5" y="77.0339">ListBoardsService</text><rect fill="#E2E2F0" height="52.1358" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="132" x="832.5" y="1642.7704"/><text fill="#000000" font-family="sans-serif" font-size="14" font-style="italic" lengthAdjust="spacing" textLength="57" x="870" y="1664.7364">«service»</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="118" x="839.5" y="1683.8043">ListBoardsService</text><rect fill="#E2E2F0" height="52.1358" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="130" x="974.5" y="36"/><text fill="#000000" font-family="sans-serif" font-size="14" font-style="italic" lengthAdjust="spacing" textLength="57" x="1011" y="57.9659">«service»</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="116" x="981.5" y="77.0339">ListPostItsService</text><rect fill="#E2E2F0" height="52.1358" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="130" x="974.5" y="1642.7704"/><text fill="#000000" font-family="sans-serif" font-size="14" font-style="italic" lengthAdjust="spacing" textLength="57" x="1011" y="1664.7364">«service»</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="116" x="981.5" y="1683.8043">ListPostItsService</text><rect fill="#E2E2F0" height="52.1358" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="183" x="1114.5" y="36"/><text fill="#000000" font-family="sans-serif" font-size="14" font-style="italic" lengthAdjust="spacing" textLength="57" x="1177.5" y="57.9659">«service»</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="169" x="1121.5" y="77.0339">UserManagementService</text><rect fill="#E2E2F0" height="52.1358" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="183" x="1114.5" y="1642.7704"/><text fill="#000000" font-family="sans-serif" font-size="14" font-style="italic" lengthAdjust="spacing" textLength="57" x="1177.5" y="1664.7364">«service»</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="169" x="1121.5" y="1683.8043">UserManagementService</text><rect fill="#E2E2F0" height="52.1358" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="76" x="1307.5" y="36"/><text fill="#000000" font-family="sans-serif" font-size="14" font-style="italic" lengthAdjust="spacing" textLength="62" x="1314.5" y="57.9659">«domain»</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="40" x="1325.5" y="77.0339">Board</text><rect fill="#E2E2F0" height="52.1358" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="76" x="1307.5" y="1642.7704"/><text fill="#000000" font-family="sans-serif" font-size="14" font-style="italic" lengthAdjust="spacing" textLength="62" x="1314.5" y="1664.7364">«domain»</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="40" x="1325.5" y="1683.8043">Board</text><rect fill="#E2E2F0" height="52.1358" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="76" x="1393.5" y="36"/><text fill="#000000" font-family="sans-serif" font-size="14" font-style="italic" lengthAdjust="spacing" textLength="62" x="1400.5" y="57.9659">«domain»</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="38" x="1412.5" y="77.0339">PostIt</text><rect fill="#E2E2F0" height="52.1358" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="76" x="1393.5" y="1642.7704"/><text fill="#000000" font-family="sans-serif" font-size="14" font-style="italic" lengthAdjust="spacing" textLength="62" x="1400.5" y="1664.7364">«domain»</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="38" x="1412.5" y="1683.8043">PostIt</text><rect fill="#E2E2F0" height="52.1358" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="83" x="1479.5" y="36"/><text fill="#000000" font-family="sans-serif" font-size="14" font-style="italic" lengthAdjust="spacing" textLength="35" x="1503.5" y="57.9659">«dto»</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="69" x="1486.5" y="77.0339">BoardDTO</text><rect fill="#E2E2F0" height="52.1358" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="83" x="1479.5" y="1642.7704"/><text fill="#000000" font-family="sans-serif" font-size="14" font-style="italic" lengthAdjust="spacing" textLength="35" x="1503.5" y="1664.7364">«dto»</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="69" x="1486.5" y="1683.8043">BoardDTO</text><rect fill="#E2E2F0" height="52.1358" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="81" x="1572.5" y="36"/><text fill="#000000" font-family="sans-serif" font-size="14" font-style="italic" lengthAdjust="spacing" textLength="35" x="1595.5" y="57.9659">«dto»</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="67" x="1579.5" y="77.0339">PostItDTO</text><rect fill="#E2E2F0" height="52.1358" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="81" x="1572.5" y="1642.7704"/><text fill="#000000" font-family="sans-serif" font-size="14" font-style="italic" lengthAdjust="spacing" textLength="35" x="1595.5" y="1664.7364">«dto»</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="67" x="1579.5" y="1683.8043">PostItDTO</text><text fill="#000000" font-family="sans-serif" font-size="14" font-style="italic" lengthAdjust="spacing" textLength="79" x="1679.5" y="65.9659">«repository»</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="111" x="1663.5" y="85.0339">BoardRepository</text><path d="M1704,15 C1704,5 1722,5 1722,5 C1722,5 1740,5 1740,15 L1740,41 C1740,51 1722,51 1722,51 C1722,51 1704,51 1704,41 L1704,15 " fill="#E2E2F0" style="stroke:#181818;stroke-width:1.5;"/><path d="M1704,15 C1704,25 1722,25 1722,25 C1722,25 1740,25 1740,15 " fill="none" style="stroke:#181818;stroke-width:1.5;"/><text fill="#000000" font-family="sans-serif" font-size="14" font-style="italic" lengthAdjust="spacing" textLength="79" x="1679.5" y="1657.7364">«repository»</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="111" x="1663.5" y="1676.8043">BoardRepository</text><path d="M1704,1690.9063 C1704,1680.9063 1722,1680.9063 1722,1680.9063 C1722,1680.9063 1740,1680.9063 1740,1690.9063 L1740,1716.9063 C1740,1726.9063 1722,1726.9063 1722,1726.9063 C1722,1726.9063 1704,1726.9063 1704,1716.9063 L1704,1690.9063 " fill="#E2E2F0" style="stroke:#181818;stroke-width:1.5;"/><path d="M1704,1690.9063 C1704,1700.9063 1722,1700.9063 1722,1700.9063 C1722,1700.9063 1740,1700.9063 1740,1690.9063 " fill="none" style="stroke:#181818;stroke-width:1.5;"/><text fill="#000000" font-family="sans-serif" font-size="14" font-style="italic" lengthAdjust="spacing" textLength="79" x="1805.5" y="65.9659">«repository»</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="109" x="1790.5" y="85.0339">PostItRepository</text><path d="M1830,15 C1830,5 1848,5 1848,5 C1848,5 1866,5 1866,15 L1866,41 C1866,51 1848,51 1848,51 C1848,51 1830,51 1830,41 L1830,15 " fill="#E2E2F0" style="stroke:#181818;stroke-width:1.5;"/><path d="M1830,15 C1830,25 1848,25 1848,25 C1848,25 1866,25 1866,15 " fill="none" style="stroke:#181818;stroke-width:1.5;"/><text fill="#000000" font-family="sans-serif" font-size="14" font-style="italic" lengthAdjust="spacing" textLength="79" x="1805.5" y="1657.7364">«repository»</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="109" x="1790.5" y="1676.8043">PostItRepository</text><path d="M1830,1690.9063 C1830,1680.9063 1848,1680.9063 1848,1680.9063 C1848,1680.9063 1866,1680.9063 1866,1690.9063 L1866,1716.9063 C1866,1726.9063 1848,1726.9063 1848,1726.9063 C1848,1726.9063 1830,1726.9063 1830,1716.9063 L1830,1690.9063 " fill="#E2E2F0" style="stroke:#181818;stroke-width:1.5;"/><path d="M1830,1690.9063 C1830,1700.9063 1848,1700.9063 1848,1700.9063 C1848,1700.9063 1866,1700.9063 1866,1690.9063 " fill="none" style="stroke:#181818;stroke-width:1.5;"/><rect fill="#FFFFFF" height="1502.9286" style="stroke:#181818;stroke-width:1.0;" width="10" x="301.5" y="122.8419"/><rect fill="#FFFFFF" height="1439.5165" style="stroke:#181818;stroke-width:1.0;" width="10" x="611.5" y="154.5479"/><rect fill="#FFFFFF" height="347.3541" style="stroke:#181818;stroke-width:1.0;" width="10" x="893.5" y="186.2539"/><rect fill="#FFFFFF" height="222.2361" style="stroke:#181818;stroke-width:1.0;" width="10" x="1034.5" y="692.1381"/><rect fill="#FFFFFF" height="30" style="stroke:#181818;stroke-width:1.0;" width="10" x="1201" y="217.9599"/><rect fill="#FFFFFF" height="61.706" style="stroke:#181818;stroke-width:1.0;" width="10" x="1340.5" y="433.196"/><rect fill="#FFFFFF" height="30" style="stroke:#181818;stroke-width:1.0;" width="10" x="1340.5" y="1226.4344"/><rect fill="#FFFFFF" height="30" style="stroke:#181818;stroke-width:1.0;" width="10" x="1340.5" y="1366.8283"/><rect fill="#FFFFFF" height="61.706" style="stroke:#181818;stroke-width:1.0;" width="10" x="1426.5" y="813.9622"/><rect fill="#FFFFFF" height="30" style="stroke:#181818;stroke-width:1.0;" width="10" x="1426.5" y="1288.1404"/><rect fill="#FFFFFF" height="31.706" style="stroke:#181818;stroke-width:1.0;" width="10" x="1426.5" y="1530.6524"/><rect fill="#FFFFFF" height="30" style="stroke:#181818;stroke-width:1.0;" width="10" x="1516" y="464.902"/><rect fill="#FFFFFF" height="30" style="stroke:#181818;stroke-width:1.0;" width="10" x="1608" y="845.6682"/><rect fill="#FFFFFF" height="31.706" style="stroke:#181818;stroke-width:1.0;" width="10" x="1717" y="343.0779"/><rect fill="#FFFFFF" height="444.1782" style="stroke:#181818;stroke-width:1.0;" width="10" x="1843" y="723.8441"/><polygon fill="#181818" points="289.5,118.8419,299.5,122.8419,289.5,126.8419,293.5,122.8419" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="23.5" x2="295.5" y1="122.8419" y2="122.8419"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="7" x="30.5" y="117.0328">1</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="248" x="41.5" y="117.0328">wants to undo the last change of a post-it</text><polygon fill="#181818" points="599.5,150.5479,609.5,154.5479,599.5,158.5479,603.5,154.5479" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="311.5" x2="605.5" y1="154.5479" y2="154.5479"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="7" x="318.5" y="148.7389">2</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="33" x="329.5" y="148.7389">new()</text><polygon fill="#181818" points="881.5,182.2539,891.5,186.2539,881.5,190.2539,885.5,186.2539" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="621.5" x2="887.5" y1="186.2539" y2="186.2539"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="7" x="628.5" y="180.4449">3</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="242" x="639.5" y="180.4449">listBoardService = new(boardRepository)</text><polygon fill="#181818" points="1189,213.9599,1199,217.9599,1189,221.9599,1193,217.9599" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="621.5" x2="1195" y1="217.9599" y2="217.9599"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="7" x="628.5" y="212.1509">4</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="198" x="639.5" y="212.1509">usrService = new(userRepository)</text><polygon fill="#181818" points="599.5,275.6659,609.5,279.6659,599.5,283.6659,603.5,279.6659" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="311.5" x2="605.5" y1="279.6659" y2="279.6659"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="7" x="318.5" y="273.8569">5</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="145" x="329.5" y="273.8569">listUserWritableBoards()</text><polygon fill="#181818" points="881.5,307.3719,891.5,311.3719,881.5,315.3719,885.5,311.3719" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="621.5" x2="887.5" y1="311.3719" y2="311.3719"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="7" x="628.5" y="305.5629">6</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="102" x="639.5" y="305.5629">userBoards(user)</text><polygon fill="#181818" points="1705,339.0779,1715,343.0779,1705,347.0779,1709,343.0779" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="903.5" x2="1711" y1="343.0779" y2="343.0779"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="7" x="910.5" y="337.2689">7</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="191" x="921.5" y="337.2689">findAllUserWritableBoards(user)</text><polygon fill="#181818" points="914.5,370.784,904.5,374.784,914.5,378.784,910.5,374.784" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="908.5" x2="1721" y1="374.784" y2="374.784"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="7" x="920.5" y="368.975">8</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="42" x="931.5" y="368.975">boards</text><path d="M822.5,389.784 L895.5,389.784 L895.5,399.49 L885.5,409.49 L822.5,409.49 L822.5,389.784 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.5;"/><rect fill="none" height="113.118" style="stroke:#000000;stroke-width:1.5;" width="750" x="822.5" y="389.784"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="28" x="837.5" y="404.681">loop</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="90" x="910.5" y="403.5429">[for each board]</text><polygon fill="#181818" points="1328.5,429.196,1338.5,433.196,1328.5,437.196,1332.5,433.196" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="903.5" x2="1334.5" y1="433.196" y2="433.196"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="7" x="910.5" y="427.387">9</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="87" x="921.5" y="427.387">toDTO(course)</text><polygon fill="#181818" points="1504,460.902,1514,464.902,1504,468.902,1508,464.902" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="1350.5" x2="1510" y1="464.902" y2="464.902"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="14" x="1357.5" y="459.093">10</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="33" x="1375.5" y="459.093">new()</text><polygon fill="#181818" points="632.5,529.608,622.5,533.608,632.5,537.608,628.5,533.608" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="626.5" x2="897.5" y1="533.608" y2="533.608"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="14" x="638.5" y="527.799">11</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="42" x="656.5" y="527.799">boards</text><polygon fill="#181818" points="322.5,561.314,312.5,565.314,322.5,569.314,318.5,565.314" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="316.5" x2="610.5" y1="565.314" y2="565.314"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="14" x="328.5" y="559.505">12</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="42" x="346.5" y="559.505">boards</text><polygon fill="#181818" points="34.5,593.0201,24.5,597.0201,34.5,601.0201,30.5,597.0201" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="28.5" x2="300.5" y1="597.0201" y2="597.0201"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="14" x="40.5" y="591.2111">13</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="128" x="58.5" y="591.2111">asks to select a board</text><polygon fill="#181818" points="289.5,624.7261,299.5,628.7261,289.5,632.7261,293.5,628.7261" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="23.5" x2="295.5" y1="628.7261" y2="628.7261"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="14" x="30.5" y="622.9171">14</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="89" x="48.5" y="622.9171">selects a board</text><polygon fill="#181818" points="599.5,656.4321,609.5,660.4321,599.5,664.4321,603.5,660.4321" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="311.5" x2="605.5" y1="660.4321" y2="660.4321"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="14" x="318.5" y="654.6231">15</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="258" x="336.5" y="654.6231">listLatestBoardPostItsFromUser(boardDto)</text><polygon fill="#181818" points="1022.5,688.1381,1032.5,692.1381,1022.5,696.1381,1026.5,692.1381" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="621.5" x2="1028.5" y1="692.1381" y2="692.1381"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="14" x="628.5" y="686.3291">16</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="265" x="646.5" y="686.3291">latestOfBoardFromUser(boardId, username)</text><polygon fill="#181818" points="1831,719.8441,1841,723.8441,1831,727.8441,1835,723.8441" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="1044.5" x2="1837" y1="723.8441" y2="723.8441"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="14" x="1051.5" y="718.0351">17</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="305" x="1069.5" y="718.0351">findLatestFromUserByBoardId(boardId, username)</text><polygon fill="#181818" points="1055.5,751.5501,1045.5,755.5501,1055.5,759.5501,1051.5,755.5501" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="1049.5" x2="1842" y1="755.5501" y2="755.5501"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="14" x="1061.5" y="749.7411">18</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="42" x="1079.5" y="749.7411">postIts</text><path d="M964.5,770.5501 L1037.5,770.5501 L1037.5,780.2562 L1027.5,790.2562 L964.5,790.2562 L964.5,770.5501 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.5;"/><rect fill="none" height="113.118" style="stroke:#000000;stroke-width:1.5;" width="699" x="964.5" y="770.5501"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="28" x="979.5" y="785.4472">loop</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="93" x="1052.5" y="784.3091">[for each post-it]</text><polygon fill="#181818" points="1414.5,809.9622,1424.5,813.9622,1414.5,817.9622,1418.5,813.9622" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="1044.5" x2="1420.5" y1="813.9622" y2="813.9622"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="14" x="1051.5" y="808.1532">19</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="83" x="1069.5" y="808.1532">toDTO(postIt)</text><polygon fill="#181818" points="1596,841.6682,1606,845.6682,1596,849.6682,1600,845.6682" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="1436.5" x2="1602" y1="845.6682" y2="845.6682"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="14" x="1443.5" y="839.8592">20</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="33" x="1461.5" y="839.8592">new()</text><polygon fill="#181818" points="632.5,910.3742,622.5,914.3742,632.5,918.3742,628.5,914.3742" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="626.5" x2="1038.5" y1="914.3742" y2="914.3742"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="14" x="638.5" y="908.5652">21</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="42" x="656.5" y="908.5652">postIts</text><polygon fill="#181818" points="322.5,942.0802,312.5,946.0802,322.5,950.0802,318.5,946.0802" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="316.5" x2="610.5" y1="946.0802" y2="946.0802"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="14" x="328.5" y="940.2712">22</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="42" x="346.5" y="940.2712">postIts</text><polygon fill="#181818" points="34.5,973.7862,24.5,977.7862,34.5,981.7862,30.5,977.7862" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="28.5" x2="300.5" y1="977.7862" y2="977.7862"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="14" x="40.5" y="971.9772">23</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="131" x="58.5" y="971.9772">asks to select a post-it</text><polygon fill="#181818" points="289.5,1005.4923,299.5,1009.4923,289.5,1013.4923,293.5,1009.4923" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="23.5" x2="295.5" y1="1009.4923" y2="1009.4923"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="14" x="30.5" y="1003.6833">24</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="92" x="48.5" y="1003.6833">selects a post-it</text><polygon fill="#181818" points="34.5,1037.1983,24.5,1041.1983,34.5,1045.1983,30.5,1041.1983" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="28.5" x2="300.5" y1="1041.1983" y2="1041.1983"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="14" x="40.5" y="1035.3893">25</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="154" x="58.5" y="1035.3893">asks to confirm the action</text><polygon fill="#181818" points="289.5,1068.9043,299.5,1072.9043,289.5,1076.9043,293.5,1072.9043" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="23.5" x2="295.5" y1="1072.9043" y2="1072.9043"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="14" x="30.5" y="1067.0953">26</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="115" x="48.5" y="1067.0953">confirms the action</text><polygon fill="#181818" points="599.5,1100.6103,609.5,1104.6103,599.5,1108.6103,603.5,1104.6103" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="311.5" x2="605.5" y1="1104.6103" y2="1104.6103"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="14" x="318.5" y="1098.8013">27</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="146" x="336.5" y="1098.8013">canEditPostIt(postItDto)</text><polygon fill="#181818" points="1831,1132.3163,1841,1136.3163,1831,1140.3163,1835,1136.3163" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="621.5" x2="1837" y1="1136.3163" y2="1136.3163"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="14" x="628.5" y="1130.5073">28</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="139" x="646.5" y="1130.5073">ofIdentity(postItDto.id)</text><polygon fill="#181818" points="632.5,1164.0223,622.5,1168.0223,632.5,1172.0223,628.5,1168.0223" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="626.5" x2="1847" y1="1168.0223" y2="1168.0223"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="14" x="638.5" y="1162.2133">29</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="36" x="656.5" y="1162.2133">postIt</text><path d="M526.5,1183.0223 L593.5,1183.0223 L593.5,1192.7284 L583.5,1202.7284 L526.5,1202.7284 L526.5,1183.0223 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.5;"/><rect fill="none" height="221.806" style="stroke:#000000;stroke-width:1.5;" width="953" x="526.5" y="1183.0223"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="22" x="541.5" y="1197.9194">opt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="355" x="608.5" y="1196.7813">[user is creator of post-it and has write permission to the board]</text><polygon fill="#181818" points="1328.5,1222.4344,1338.5,1226.4344,1328.5,1230.4344,1332.5,1226.4344" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="621.5" x2="1334.5" y1="1226.4344" y2="1226.4344"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="14" x="628.5" y="1220.6254">30</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="87" x="646.5" y="1220.6254">canWrite(user)</text><polygon fill="#181818" points="1414.5,1284.1404,1424.5,1288.1404,1414.5,1292.1404,1418.5,1288.1404" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="621.5" x2="1420.5" y1="1288.1404" y2="1288.1404"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="14" x="628.5" y="1282.3314">31</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="46" x="646.5" y="1282.3314">owner()</text><line style="stroke:#000000;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="526.5" x2="1479.5" y1="1327.1404" y2="1327.1404"/><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="153" x="531.5" y="1338.8993">[user is owner of the board]</text><polygon fill="#181818" points="1328.5,1362.8283,1338.5,1366.8283,1328.5,1370.8283,1332.5,1366.8283" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="621.5" x2="1334.5" y1="1366.8283" y2="1366.8283"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="14" x="628.5" y="1361.0193">32</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="46" x="646.5" y="1361.0193">owner()</text><polygon fill="#181818" points="599.5,1431.5343,609.5,1435.5343,599.5,1439.5343,603.5,1435.5343" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="311.5" x2="605.5" y1="1435.5343" y2="1435.5343"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="14" x="318.5" y="1429.7253">33</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="180" x="336.5" y="1429.7253">undoPostItChange(postItDto)</text><polygon fill="#181818" points="1836,1463.2403,1846,1467.2403,1836,1471.2403,1840,1467.2403" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="621.5" x2="1842" y1="1467.2403" y2="1467.2403"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="14" x="628.5" y="1461.4313">34</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="139" x="646.5" y="1461.4313">ofIdentity(postItDto.id)</text><polygon fill="#181818" points="632.5,1494.9464,622.5,1498.9464,632.5,1502.9464,628.5,1498.9464" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="626.5" x2="1847" y1="1498.9464" y2="1498.9464"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="14" x="638.5" y="1493.1373">35</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="36" x="656.5" y="1493.1373">postIt</text><polygon fill="#181818" points="1414.5,1526.6524,1424.5,1530.6524,1414.5,1534.6524,1418.5,1530.6524" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="621.5" x2="1420.5" y1="1530.6524" y2="1530.6524"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="14" x="628.5" y="1524.8434">36</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="177" x="646.5" y="1524.8434">getPrevious().toggleIsLatest()</text><polygon fill="#181818" points="1419.5,1558.3584,1429.5,1562.3584,1419.5,1566.3584,1423.5,1562.3584" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="621.5" x2="1425.5" y1="1562.3584" y2="1562.3584"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="14" x="628.5" y="1556.5494">37</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="45" x="646.5" y="1556.5494">delete()</text><polygon fill="#181818" points="322.5,1590.0644,312.5,1594.0644,322.5,1598.0644,318.5,1594.0644" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="316.5" x2="615.5" y1="1594.0644" y2="1594.0644"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="14" x="328.5" y="1588.2554">38</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="110" x="346.5" y="1588.2554">previousPostItDto</text><polygon fill="#181818" points="34.5,1621.7704,24.5,1625.7704,34.5,1629.7704,30.5,1625.7704" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="28.5" x2="305.5" y1="1625.7704" y2="1625.7704"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="14" x="40.5" y="1619.9614">39</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="217" x="58.5" y="1619.9614">informs the success of the operation</text><!--MD5=[04bd3a51d81f4a9cc38f05a1216861ba]
@startuml US3008_SD
autonumber

actor "User" as U
participant "ShareBoardUI" as UI <<presentation>>
participant "ShareBoardController" as CTRL <<application>>
participant "ListBoardsService" as BOARDSVC <<service>>
participant "ListPostItsService" as POSTITSVC <<service>>
participant "UserManagementService" as USRSVC <<service>>
participant "Board" as B <<domain>>
participant "PostIt" as P <<domain>>
participant "BoardDTO" as BDTO <<dto>>
participant "PostItDTO" as PDTO <<dto>>

database BoardRepository as BOARDREP <<repository>>
database PostItRepository as POSTITREP <<repository>>

U -> UI : wants to undo the last change of a post-it
activate UI
  UI -> CTRL : new()
  activate CTRL
    CTRL -> BOARDSVC : listBoardService = new(boardRepository)
    activate BOARDSVC
    ' deactivate BOARDSVC

    CTRL -> USRSVC : usrService = new(userRepository)
    activate USRSVC
    deactivate USRSVC
  ' deactivate CTRL

  UI -> CTRL : listUserWritableBoards()
  ' activate CTRL
    CTRL -> BOARDSVC : userBoards(user)
    ' activate BOARDSVC
      BOARDSVC -> BOARDREP : findAllUserWritableBoards(user)
      activate BOARDREP
         BOARDSVC <- - BOARDREP : boards
      deactivate BOARDREP

      loop for each board
        BOARDSVC -> B : toDTO(course)
        activate B
          B -> BDTO : new()
          activate BDTO
          deactivate BDTO
        deactivate B
      end loop

      CTRL <- - BOARDSVC : boards
    deactivate BOARDSVC
    UI <- - CTRL : boards
  ' deactivate CTRL

  U <- - UI : asks to select a board
' deactivate UI

U -> UI : selects a board
' activate UI
  UI -> CTRL : listLatestBoardPostItsFromUser(boardDto)
  ' activate CTRL
    CTRL -> POSTITSVC : latestOfBoardFromUser(boardId, username)
    activate POSTITSVC
      POSTITSVC -> POSTITREP : findLatestFromUserByBoardId(boardId, username)
      activate POSTITREP
        POSTITSVC <- - POSTITREP : postIts
      ' deactivate POSTITREP

      loop for each post-it
        POSTITSVC -> P : toDTO(postIt)
        activate P
          P -> PDTO : new()
          activate PDTO
          deactivate PDTO
        deactivate P
      end loop

      CTRL <- - POSTITSVC : postIts
    deactivate POSTITSVC

    UI <- - CTRL : postIts
  ' deactivate CTRL

  U <- - UI : asks to select a post-it
' deactivate UI

U -> UI : selects a post-it
' activate UI
  U <- - UI : asks to confirm the action
' deactivate UI

U -> UI : confirms the action
' activate UI
  UI -> CTRL : canEditPostIt(postItDto)
  ' activate CTRL
    CTRL -> POSTITREP : ofIdentity(postItDto.id)
    ' activate POSTITREP
      CTRL <- - POSTITREP : postIt
    deactivate POSTITREP

    opt user is creator of post-it and has write permission to the board
      CTRL -> B : canWrite(user)
      activate B
      deactivate B

      CTRL -> P : owner()
      activate P
      deactivate P

    else user is owner of the board
      CTRL -> B : owner()
      activate B
      deactivate B
    end

  UI -> CTRL : undoPostItChange(postItDto)
  ' activate CTRL
    CTRL -> POSTITREP : ofIdentity(postItDto.id)
    ' activate POSTITREP
      CTRL <- - POSTITREP : postIt
    deactivate POSTITREP

    CTRL -> P : getPrevious().toggleIsLatest()
    activate P
    ' deactivate P

    CTRL -> P : delete()
    ' activate P
    deactivate P

    UI <- - CTRL : previousPostItDto
  deactivate CTRL

  U <- - UI : informs the success of the operation
deactivate UI

deactivate U

@enduml

@startuml US3008_SD
autonumber

actor "User" as U
participant "ShareBoardUI" as UI <<presentation>>
participant "ShareBoardController" as CTRL <<application>>
participant "ListBoardsService" as BOARDSVC <<service>>
participant "ListPostItsService" as POSTITSVC <<service>>
participant "UserManagementService" as USRSVC <<service>>
participant "Board" as B <<domain>>
participant "PostIt" as P <<domain>>
participant "BoardDTO" as BDTO <<dto>>
participant "PostItDTO" as PDTO <<dto>>

database BoardRepository as BOARDREP <<repository>>
database PostItRepository as POSTITREP <<repository>>

U -> UI : wants to undo the last change of a post-it
activate UI
  UI -> CTRL : new()
  activate CTRL
    CTRL -> BOARDSVC : listBoardService = new(boardRepository)
    activate BOARDSVC

    CTRL -> USRSVC : usrService = new(userRepository)
    activate USRSVC
    deactivate USRSVC

  UI -> CTRL : listUserWritableBoards()
    CTRL -> BOARDSVC : userBoards(user)
      BOARDSVC -> BOARDREP : findAllUserWritableBoards(user)
      activate BOARDREP
         BOARDSVC <- - BOARDREP : boards
      deactivate BOARDREP

      loop for each board
        BOARDSVC -> B : toDTO(course)
        activate B
          B -> BDTO : new()
          activate BDTO
          deactivate BDTO
        deactivate B
      end loop

      CTRL <- - BOARDSVC : boards
    deactivate BOARDSVC
    UI <- - CTRL : boards

  U <- - UI : asks to select a board

U -> UI : selects a board
  UI -> CTRL : listLatestBoardPostItsFromUser(boardDto)
    CTRL -> POSTITSVC : latestOfBoardFromUser(boardId, username)
    activate POSTITSVC
      POSTITSVC -> POSTITREP : findLatestFromUserByBoardId(boardId, username)
      activate POSTITREP
        POSTITSVC <- - POSTITREP : postIts

      loop for each post-it
        POSTITSVC -> P : toDTO(postIt)
        activate P
          P -> PDTO : new()
          activate PDTO
          deactivate PDTO
        deactivate P
      end loop

      CTRL <- - POSTITSVC : postIts
    deactivate POSTITSVC

    UI <- - CTRL : postIts

  U <- - UI : asks to select a post-it

U -> UI : selects a post-it
  U <- - UI : asks to confirm the action

U -> UI : confirms the action
  UI -> CTRL : canEditPostIt(postItDto)
    CTRL -> POSTITREP : ofIdentity(postItDto.id)
      CTRL <- - POSTITREP : postIt
    deactivate POSTITREP

    opt user is creator of post-it and has write permission to the board
      CTRL -> B : canWrite(user)
      activate B
      deactivate B

      CTRL -> P : owner()
      activate P
      deactivate P

    else user is owner of the board
      CTRL -> B : owner()
      activate B
      deactivate B
    end

  UI -> CTRL : undoPostItChange(postItDto)
    CTRL -> POSTITREP : ofIdentity(postItDto.id)
      CTRL <- - POSTITREP : postIt
    deactivate POSTITREP

    CTRL -> P : getPrevious().toggleIsLatest()
    activate P

    CTRL -> P : delete()
    deactivate P

    UI <- - CTRL : previousPostItDto
  deactivate CTRL

  U <- - UI : informs the success of the operation
deactivate UI

deactivate U

@enduml

PlantUML version 1.2022.7(Mon Aug 22 18:01:30 WEST 2022)
(GPL source distribution)
Java Runtime: OpenJDK Runtime Environment
JVM: OpenJDK 64-Bit Server VM
Default Encoding: UTF-8
Language: en
Country: GB
--></g></svg>